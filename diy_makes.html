<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>DIY MAKES</title>
  <link rel="stylesheet" href="styles/global.css" />
<style>
  body{font-family:Helvetica,Arial,sans-serif;background:#fff;margin:0;padding:0}
  #globalNav{width:100%}
  h1.page-title{text-align:center;font-size:2rem;margin:50px auto 20px;font-weight:bold;letter-spacing:.05em;max-width:750px;padding:0 20px}

  .instrument-list{display:flex;flex-direction:column;align-items:center;justify-content:center;max-width:800px;margin:0 auto;padding:2rem 1rem 4rem}
  .instrument-item{text-align:center;margin-bottom:4rem;position:relative}
  .instrument-title{font-weight:bold;font-size:1.2rem;margin-bottom:.2rem}
  .instrument-year{font-size:.9rem;color:#000000;margin-bottom:.5rem}

  .instrument-image-container{position:relative;display:inline-block;cursor:pointer;overflow:visible;max-height:300px}
  .instrument-image{
    max-height:160px;
    height:auto;
    width:auto;
    max-width:100%;
    display:block;
    transition:filter .35s ease,transform .35s ease,opacity .35s ease;
  }

  /* blur + lighten + fade â€” no white box, no shadow */
  .instrument-image-container:hover .instrument-image,
  .instrument-image-container:focus .instrument-image {
    filter:blur(8px) brightness(1.1);
    opacity:0.75; /* fade for white wash effect */
    transform:scale(1.01);
  }

  /* text overlay with no background */
  .instrument-overlay{
    position:absolute;
    top:50%;
    left:50%;
    transform:translate(-50%,-50%);
    width:min(1100px,92vw);
    padding:0;
    text-align:center;
    z-index:10;
    pointer-events:none;
    opacity:0;
    transition:opacity .35s ease;
    background:transparent;
  }
  .instrument-image-container:hover .instrument-overlay,
  .instrument-image-container:focus .instrument-overlay{opacity:1}

  .instrument-description{display:flex;flex-direction:column;align-items:center;justify-content:center}
  .instrument-description>div{font-size:clamp(14px,1.8vw,20px);line-height:1.35;letter-spacing:.01em;color:#000}
  .instrument-description span{margin-top:.9rem;font-style:italic;font-size:clamp(12px,1.3vw,18px);color:#000000;opacity:.9}

  @media (max-width:560px){
    .instrument-image-container{max-height:260px}
    .instrument-image{max-height:260px}
  }
</style>
</head>

<body>
  <div id="globalNav"></div>
  <h1 class="page-title">DIY/MAKES</h1>

  <div class="instrument-list" id="instrumentList"></div>

  <script>
    // Load global nav
    fetch('components/nav.html')
      .then(response => response.text())
      .then(html => {
        document.getElementById('globalNav').innerHTML = html;
        const navScript = document.createElement('script');
        navScript.src = 'components/nav.js';
        document.body.appendChild(navScript);
      });

    // Load diy_makes
    fetch('data/diy_makes.json')
      .then(response => response.json())
      .then(data => {
        const container = document.getElementById('instrumentList');
        data.forEach(instrument => {
          const item = document.createElement('div');
          item.className = 'instrument-item';

          const title = document.createElement('div');
          title.className = 'instrument-title';
          title.textContent = instrument.title;

          const year = document.createElement('div');
          year.className = 'instrument-year';
          year.textContent = `(${instrument.year})`;

          const imageContainer = document.createElement('div');
          imageContainer.className = 'instrument-image-container';

          const image = document.createElement('img');
          image.className = 'instrument-image';
          image.src = instrument.main_image;
          image.alt = instrument.title;

          const overlay = document.createElement('div');
          overlay.className = 'instrument-overlay';

          const descriptionWrap = document.createElement('div');
          descriptionWrap.className = 'instrument-description';

          const descriptionText = document.createElement('div');
          descriptionText.textContent = `${instrument.short_description.slice(0, 180)}...`;

          const clickHint = document.createElement('span');
          clickHint.textContent = 'Click for more';

          descriptionWrap.appendChild(descriptionText);
          descriptionWrap.appendChild(clickHint);
          overlay.appendChild(descriptionWrap);

          imageContainer.appendChild(image);
          imageContainer.appendChild(overlay);

          imageContainer.addEventListener('click', () => {
            window.location.href = instrument.url;
          });

          item.appendChild(title);
          item.appendChild(year);
          item.appendChild(imageContainer);

          container.appendChild(item);
        });
      });
  </script>
</body>

</html>